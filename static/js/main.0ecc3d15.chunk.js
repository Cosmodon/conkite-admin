(this["webpackJsonpcorrlinks-admin"]=this["webpackJsonpcorrlinks-admin"]||[]).push([[0],{394:function(e,t,n){e.exports=n(549)},549:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return Wn}));var r=n(0),a=n.n(r),s=n(19),i=n.n(s),o=n(6),c=n.n(o),u=n(11),l=n(21),d=n(31),p=n(40),b=n(41),f=n(24),h=n(226),m=n(581),v=n(585),g=n(577),k=n(63),_=n(262),y=n(76),O=n.n(y),j=n(255),w=n(8),x=n(38),E=n(95),C=n(377),S=n.n(C);var U;function L(e,t,n){return e.filter((function(e){return e[t]!==n}))}function P(e){return e?e.toJSON().substr(0,10):null}function F(e){try{return S()(e+"","mm/dd/yyyy")}catch(t){return"-"}}function M(e){if(!e)return"-";var t=(e=e.substr(0,10)).split("-"),n=Object(x.a)(t,3),r=n[0];return[n[1],n[2],r].join("/")}function T(e){var t=(new Date).getTimezoneOffset(),n=new Date(e);return n.setHours(n.getHours()+t/60),n}function D(e){return function(t){return e.onChange(t.toISOString().substr(0,10))}}var I,z,N,A,R=Object(f.c)("store")(U=Object(f.d)(U=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.store.app.fetchUserNotes({corrlinks_id:this.props.user.corrlinks_id});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.store.app.notes.filter((function(t){return t.corrlinks_id===e.props.user.corrlinks_id})),n=function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.store.app.addUserNote({corrlinks_id:e.props.user.corrlinks_id,note:n.note});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r=function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.store.app.deleteUserNote({corrlinks_id:e.props.user.corrlinks_id,note_id:n.id});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,{style:{width:"75%",margin:"0 auto"},options:{search:!1,showTitle:!1,columnsButton:!0},isLoading:this.props.store.app.isLoading.notes,title:"Notes",data:t,columns:[{title:"id",field:"id",defaultSort:"desc",editable:"never"},{title:"Note",field:"note",editable:"onAdd"},{title:"Date Created",field:"date_created",defaultSort:"desc",editable:"always"}],editable:{onRowAdd:n,onRowDelete:r}}))}}]),n}(a.a.Component))||U)||U,W=Object(f.c)("store")(I=Object(f.d)(I=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.store.app.fetchUserPayments(this.props.user.corrlinks_id);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.store.app.payments.filter((function(t){return t.corrlinks_id===e.props.user.corrlinks_id})),n=function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.store.app.deletePayment({corrlinks_id:e.props.user.corrlinks_id,payment_id:n.id});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,{style:{width:"75%",margin:"0 auto"},options:{pageSize:5,search:!1,showTitle:!1},isLoading:this.props.store.app.isPaymentsLoading,title:"Payments",data:t,columns:[{title:"id",field:"id",defaultSort:"desc",editable:"never"},{title:"Date Payment Made",field:"date_created",defaultSort:"desc",editable:"always",initialEditValue:function(){return new Date},editComponent:function(e){return a.a.createElement(j.a,{value:e.value,onChange:e.onChange})},render:function(e){return M(e.date_created)}},{title:"Amount",field:"amount",defaultSort:"desc",editable:"always",initialEditValue:function(){return 0}},{title:"Comment",field:"comment",defaultSort:"desc",editable:"always"}],editable:{onRowDelete:n}}))}}]),n}(a.a.Component))||I)||I,B=Object(f.c)("store")(z=Object(f.d)(z=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===this||void 0===this||null===(t=this.props)||void 0===t||null===(n=t.store)||void 0===n||null===(r=n.app)||void 0===r||null===(a=r.fetchMessagesForCorrlinks)||void 0===a?void 0:a.call(r,{corrlinks_id:this.props.user.corrlinks_id});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n,r,s,i=this,o=null===this||void 0===this||null===(e=this.props)||void 0===e||null===(t=e.store)||void 0===t||null===(n=t.app)||void 0===n||null===(r=n.messagesForCorrlinks)||void 0===r||null===(s=r.filter)||void 0===s?void 0:s.call(r,(function(e){return e.corrlinks_id===i.props.user.corrlinks_id}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,{style:{width:"75%",margin:"0 auto"},options:{search:!0,filtering:!0,showTitle:!1,columnsButton:!0},isLoading:this.props.store.app.isLoading.messagesForCorrlinks,title:"Messages For Corrlinks",data:o,columns:[{title:"id",field:"id",defaultSort:"desc"},{title:"Mobile Number",field:"mobile_number"},{title:"Subject",field:"subject"},{title:"Body",field:"body"},{title:"Status",field:"status"},{title:"Date Created",field:"date_created"},{title:"Corrlinks Account",field:"corrlinks_account"}]}))}}]),n}(a.a.Component))||z)||z,V=Object(f.c)("store")(N=Object(f.d)(N=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===this||void 0===this||null===(t=this.props)||void 0===t||null===(n=t.store)||void 0===n||null===(r=n.app)||void 0===r||null===(a=r.fetchMessagesForSociety)||void 0===a?void 0:a.call(r,{corrlinks_id:this.props.user.corrlinks_id});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n,r,s,i=this,o=null===this||void 0===this||null===(e=this.props)||void 0===e||null===(t=e.store)||void 0===t||null===(n=t.app)||void 0===n||null===(r=n.messagesForSociety)||void 0===r||null===(s=r.filter)||void 0===s?void 0:s.call(r,(function(e){return e.corrlinks_id===i.props.user.corrlinks_id}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,{style:{width:"75%",margin:"0 auto"},options:{search:!0,filtering:!0,showTitle:!1,columnsButton:!0},isLoading:this.props.store.app.isLoading.messagesForSociety,title:"Messages For Society",data:o,columns:[{title:"id",field:"id",defaultSort:"desc"},{title:"Mobile Number",field:"mobile_number"},{title:"Subject",field:"subject"},{title:"Body",field:"body"},{title:"Status",field:"status"},{title:"Date Created",field:"date_created"},{title:"Corrlinks Account",field:"corrlinks_account"}]}))}}]),n}(a.a.Component))||N)||N;function Q(e){var t=Object(r.useState)(1),n=Object(x.a)(t,2),s=n[0],i=n[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{value:s,style:{width:"75%",margin:"0 auto"}},a.a.createElement(g.a,{value:1,onClick:function(){return i(1)},label:"Payments"}),a.a.createElement(g.a,{value:2,onClick:function(){return i(2)},label:"Notes"}),a.a.createElement(g.a,{value:3,onClick:function(){return i(3)},label:"Messages For Corrlinks"}),a.a.createElement(g.a,{value:4,onClick:function(){return i(4)},label:"Messages For Society"})),1===s&&a.a.createElement(W,{user:e.user}),2===s&&a.a.createElement(R,{user:e.user}),3===s&&a.a.createElement(B,{user:e.user}),4===s&&a.a.createElement(V,{user:e.user}))}var q=function(e){return parseInt(function(e){return(new Date(e).toJSON()||"").substr(0,10)}(e).split("-").join(""))},H=function(e){var t=q(e);return q(new Date)>t};function J(e){if(!e.corrlinks_id||(""+e.corrlinks_id).length<8)throw new Error("corrlinks_id must be 8 digits long");if(!e.name||e.name.lengt<1)throw new Error("name required");if(!e.date_subscription_ends||!new Date(e.date_subscription_ends).valueOf())throw new Error("date_subscription_ends must be a valid date");return!0}var K,G,X=Object(f.c)("store")(A=Object(f.d)(A=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.store.app.fetchUsers();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return a.a.createElement(O.a,{isLoading:this.props.store.app.isLoadingUsers,title:"Corrlink Users",data:this.props.store.app.users,options:{pageSize:10,search:!0,exportButton:!0,filtering:!0,sorting:!0,columnsButton:!0},columns:[{cellStyle:{width:"10%"},title:"ID",field:"corrlinks_id",defaultSort:"desc",editable:"onAdd",type:"numeric"},{title:"NAME",field:"name",defaultSort:"desc",editable:"always"},{title:"MESSAGING SUBSCRIPTION",field:"date_subscription_ends",defaultSort:"desc",editable:"always",initialEditValue:function(){return new Date},render:function(e){var t=H(e.date_subscription_ends)?"red":"green";return a.a.createElement(k.a,{style:{color:t}},M(e.date_subscription_ends))},editComponent:function(e){return a.a.createElement(j.a,{value:T(e.value),onChange:D(e)})}},{title:"STATUS",field:"date_subscription_ends",defaultSort:"desc",editable:"never",render:function(e){var t=H(e.date_subscription_ends)?"red":"green";return a.a.createElement(k.a,{style:{color:t}},"red"===t?"UNPAID":"PAID")}},{title:"DATE CREATED",field:"date_created",defaultSort:"desc",editable:"never"},{title:"EMAIL",field:"corrlinks_account",defaultSort:"desc",editable:"always"},{title:"PRISON",field:"location",defaultSort:"desc",editable:"always"},{title:"RELEASE DATE",field:"date_release",defaultSort:"desc",editable:"onUpdate",render:function(e){return a.a.createElement(k.a,null,F(e?M(e.date_release):"-"))},editComponent:function(e){return a.a.createElement(j.a,{value:T(e.value),onChange:D(e)})}},{title:"PHONEBOOK UPDATE START DATE",field:"adhoc_phonebook_edit_window_date_start",defaultSort:"desc",editable:"onUpdate",render:function(e){return a.a.createElement(k.a,null,F(e?M(e.adhoc_phonebook_edit_window_date_start):"-"))},editComponent:function(e){return a.a.createElement(j.a,{value:T(e.value),onChange:D(e)})}},{title:"PHONEBOOK UPDATE END DATE",field:"adhoc_phonebook_edit_window_date_end",defaultSort:"desc",editable:"onUpdate",render:function(e){return a.a.createElement(k.a,null,F(e?M(e.adhoc_phonebook_edit_window_date_end):"-"))},editComponent:function(e){return a.a.createElement(j.a,{value:T(e.value),onChange:D(e)})}},{title:"HOROSCOPE SUBSCRIPTION",field:"date_horoscope_subscription_ends",defaultSort:"desc",editable:"always",render:function(e){if(!e)return null;var t=H(e.date_horoscope_subscription_ends)?"red":"green";return a.a.createElement(k.a,{style:{color:t}},M(e.date_horoscope_subscription_ends))},editComponent:function(e){return a.a.createElement(j.a,{value:T(e.value),onChange:D(e)})}},{title:"NEWS SUBSCRIPTION",field:"date_news_subscription_ends",defaultSort:"desc",editable:"always",render:function(e){if(!e)return null;var t=H(e.date_news_subscription_ends)?"red":"green";return a.a.createElement(k.a,{style:{color:t}},M(e.date_news_subscription_ends))},editComponent:function(e){return a.a.createElement(j.a,{value:T(e.value),onChange:D(e)})}},{title:"SPORTS SUBSCRIPTION",field:"date_sports_subscription_ends",defaultSort:"desc",editable:"always",render:function(e){if(!e)return null;var t=H(e.date_sports_subscription_ends)?"red":"green";return a.a.createElement(k.a,{style:{color:t}},M(e.date_sports_subscription_ends))},editComponent:function(e){return a.a.createElement(j.a,{value:T(e.value),onChange:D(e)})}},{title:"INVESTMENT SUBSCRIPTION",field:"date_investments_subscription_ends",defaultSort:"desc",editable:"always",render:function(e){if(!e)return null;var t=H(e.date_investments_subscription_ends)?"red":"green";return a.a.createElement(k.a,{style:{color:t}},M(e.date_investments_subscription_ends))},editComponent:function(e){return a.a.createElement(j.a,{value:T(e.value),onChange:D(e)})}},{title:"ESCROW",field:"credits",defaultSort:"desc",editable:"always",type:"numeric"}],editable:{isEditable:function(e){return!0},isDeletable:function(e){return!1},onRowUpdate:function(t,n){return new Promise(function(){var r=Object(u.a)(c.a.mark((function r(a,s){var i;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=n.corrlinks_id,r.prev=1,J(t),r.next=5,e.props.store.app.updateUser({corrlinks_id:i,user:t});case 5:a(null),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),s();case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e,t){return r.apply(this,arguments)}}())},onRowDelete:function(t){return new Promise(function(){var n=Object(u.a)(c.a.mark((function n(r,a){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.props.store.app.deleteUser({corrlinks_id:t.corrlinks_id});case 3:r(null),n.next=11;break;case 6:n.prev=6,n.t0=n.catch(0),console.log(n.t0),alert(n.t0),a();case 11:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e,t){return n.apply(this,arguments)}}())},onRowAdd:function(t){return new Promise(function(){var n=Object(u.a)(c.a.mark((function n(r,a){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,J(t),n.next=4,e.props.store.app.addUser({user:t});case 4:r(null),n.next=12;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0),alert(n.t0),a();case 12:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}())}},detailPanel:function(e){return a.a.createElement(Q,{user:Object(w.o)(e)})}})}}]),n}(a.a.Component))||A)||A,Y=n(353),$=n(336),Z=n(337),ee=n(333),te=n(330),ne=n(214),re=n(268),ae=n(334),se=n(578),ie=n(125),oe=n(586),ce=n(386),ue=Object(f.c)("store")(K=Object(f.d)(K=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={busy:!1,initialValues:e.getInitialValues(),users:[],usersIdx:{},products:[],productsIdx:{}},e.validate=function(e){var t={};return(isNaN(parseInt(e.amount,10))||e.amount<0)&&(t.amount="amount must be >= 0"),e.date_created instanceof Date&&"Invalid Date"!==e.date_created.toString()||(t.date_created="invalid date"),e.corrlinks_id||(t.corrlinks_id="Invalid id"),t},e.hasChanges=function(e){return JSON.stringify(e.values)!==JSON.stringify(e.initialValues)},e.onSubmit=function(){var t=Object(u.a)(c.a.mark((function t(n,r){var a,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState(Object.assign({},e.state,{busy:!0})),t.t0=n.product_type,t.next=4===t.t0?4:2===t.t0?9:3===t.t0?13:5===t.t0?17:6===t.t0?21:7===t.t0?25:29;break;case 4:return n.product_instance_id=e.state.productsIdx[n.product_type].instances[0].product_instances_id,t.next=7,e.props.store.app.submitPayment(n);case 7:return a=t.sent,t.abrupt("break",30);case 9:return t.next=11,e.props.store.app.submitPurchase(n);case 11:return a=t.sent,t.abrupt("break",30);case 13:return t.next=15,e.props.store.app.submitPurchase(n);case 15:return a=t.sent,t.abrupt("break",30);case 17:return t.next=19,e.props.store.app.submitPurchase(n);case 19:return a=t.sent,t.abrupt("break",30);case 21:return t.next=23,e.props.store.app.submitPurchase(n);case 23:return a=t.sent,t.abrupt("break",30);case 25:return t.next=27,e.props.store.app.submitPurchase(n);case 27:return a=t.sent,t.abrupt("break",30);case 29:return t.abrupt("break",30);case 30:e.setState(Object.assign({},e.state,{busy:!1})),a&&(s={type:"success",message:"Saved!"},e.props.store.notifications.addToMessageQueue(s)),Object.assign(e.state.initialValues,n);case 33:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.store.app.fetchUsers();case 2:return t=Object(w.o)(this.props.store.app.users).sort((function(e,t){return e.corrlinks_id>t.corrlinks_id?1:-1})),n=t.reduce((function(e,t){return Object.assign(e,Object(E.a)({},t.corrlinks_id,t))}),{}),this.setState({users:t,usersIdx:n}),e.next=7,this.props.store.app.fetchProducts();case 7:r={},Object(w.o)(this.props.store.app.products).forEach((function(e){return r[e.product_id]=e})),this.setState({products:this.props.store.app.products,productsIdx:r});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getInitialValues",value:function(){var e=new Date;return e.setMonth(e.getMonth()+1),{date_created:new Date,amount:0,comment:"",corrlinks_id:"",date_subscription_ends:null,product_type:4,product_instance_id:null}}},{key:"getCurrentSubEndDate",value:function(e){var t=this.state.usersIdx,n=t[e];return e&&n?new Date(t[e].date_subscription_ends).toLocaleDateString("en-US"):"-"}},{key:"getCurrentPhonebookSubEndDate",value:function(e){var t=this.state.usersIdx,n=t[e];return e&&n&&t[e].date_phonebook_subscription_ends&&"null"!==t[e].date_phonebook_subscription_ends?new Date(t[e].date_phonebook_subscription_ends).toLocaleDateString("en-US"):"-"}},{key:"getCurrentHoroscopeSubEndDate",value:function(e){var t=this.state.usersIdx,n=t[e];return e&&n&&t[e].date_horoscope_subscription_ends&&"null"!==t[e].date_horoscope_subscription_ends?new Date(t[e].date_horoscope_subscription_ends).toLocaleDateString("en-US"):"-"}},{key:"getCurrentNewsSubEndDate",value:function(e){var t=this.state.usersIdx,n=t[e];return e&&n&&t[e].date_news_subscription_ends&&"null"!==t[e].date_news_subscription_ends?new Date(t[e].date_news_subscription_ends).toLocaleDateString("en-US"):"-"}},{key:"getCurrentSportsSubEndDate",value:function(e){var t=this.state.usersIdx,n=t[e];return e&&n&&t[e].date_sports_subscription_ends&&"null"!==t[e].date_sports_subscription_ends?new Date(t[e].date_sports_subscription_ends).toLocaleDateString("en-US"):"-"}},{key:"render",value:function(){var e=this,t=this.state.users;return a.a.createElement("div",{style:{width:"500px",margin:"0 auto",textAlign:"center"}},a.a.createElement(k.a,{variant:"h5"},"Enter Payments"),a.a.createElement(ce.a,{enableReinitialize:!0,initialValues:this.state.initialValues,onSubmit:this.onSubmit,validate:this.validate},(function(n){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Y.a,null,a.a.createElement($.a,null,a.a.createElement(Z.a,null,a.a.createElement(ee.a,null,"Payment Date:"),a.a.createElement(ee.a,null,a.a.createElement(j.a,{required:!0,fullWidth:!0,name:"date_created",value:n.values.date_created,onChange:function(e){return n.setFieldValue("date_created",e)}}),n.errors.date_created&&n.touched.date_created&&a.a.createElement("div",null,n.errors.date_created))),a.a.createElement(Z.a,null,a.a.createElement(ee.a,null,"Corrlink User:"),a.a.createElement(ee.a,null,e.props.store.app.isLoading.users&&a.a.createElement(te.a,null),!e.props.store.app.isLoading.users&&a.a.createElement(oe.a,{id:"corrlinks_id",onChange:function(e){e.persist();var t=e.target.dataset.value;n.setFieldValue("corrlinks_id",t)},options:t,getOptionLabel:function(e){return"".concat(e.corrlinks_id," ").concat(e.name)},style:{width:300},renderInput:function(e){return a.a.createElement(ne.a,Object.assign({},e,{name:"corrlinks_id",variant:"standard",fullWidth:!0}))},renderOption:function(e){return a.a.createElement("div",{"data-value":e.corrlinks_id},"".concat(e.corrlinks_id," ").concat(e.name))}}),n.errors.corrlinks_id&&n.touched.corrlinks_id&&a.a.createElement("div",null,n.errors.corrlinks_id))),a.a.createElement(Z.a,null,a.a.createElement(ee.a,null,"Product"),a.a.createElement(ee.a,null,a.a.createElement(re.a,{style:{textTransform:"capitalize"},required:!0,fullWidth:!0,name:"product_type",id:"product_type",value:n.values.product_type,onChange:n.handleChange},e.state.products.map((function(e){return a.a.createElement(ae.a,{key:e.product_id,value:e.product_id,style:{textTransform:"capitalize"}},e.product_name)}))))),4===n.values.product_type&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Z.a,null,a.a.createElement(ee.a,null,"New Subscription End Date:"),a.a.createElement(ee.a,null,a.a.createElement(j.a,{fullWidth:!0,name:"date_subscription_ends",value:n.values.date_subscription_ends,onChange:function(e){return n.setFieldValue("date_subscription_ends",e)}}),n.errors.date_subscription_ends&&n.touched.date_subscription_ends&&a.a.createElement("div",null,n.errors.date_subscription_ends)))),(2===n.values.product_type||3===n.values.product_type||5===n.values.product_type||6===n.values.product_type||7===n.values.product_type)&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Z.a,null,a.a.createElement(ee.a,null,"Months"),a.a.createElement(ee.a,null,a.a.createElement(re.a,{style:{textTransform:"capitalize"},required:!0,fullWidth:!0,name:"product_instance_id",id:"product_instance_id",value:n.values.product_instance_id,onChange:function(t,r){n.handleChange(t);var a=e.state.productsIdx[n.values.product_type].instances.filter((function(e){return e.product_instances_id===r.props.value}))[0].cost;n.setFieldValue("amount",a)}},e.state.productsIdx[n.values.product_type].instances.map((function(e){return a.a.createElement(ae.a,{key:"product_instance_id-".concat(e.product_instances_id),value:e.product_instances_id,style:{textTransform:"capitalize"}},e.months," ",e.months>1?"months":"month"," = ",e.cost)})))))),a.a.createElement(Z.a,null,a.a.createElement(ee.a,null,"Amount"),a.a.createElement(ee.a,null,a.a.createElement(ne.a,{required:!0,fullWidth:!0,name:"amount",id:"amount",value:n.values.amount,onChange:n.handleChange}),n.errors.amount&&n.touched.amount&&a.a.createElement("div",null,n.errors.amount))),a.a.createElement(Z.a,null,a.a.createElement(ee.a,null,"Comment"),a.a.createElement(ee.a,null,a.a.createElement(ne.a,{fullWidth:!0,multiline:!0,rows:"3",name:"comment",value:n.values.comment,onChange:n.handleChange}),a.a.createElement("span",null,JSON.stringify(e.hasChanges(n)),JSON.stringify(n.isValid)))),a.a.createElement(Z.a,null,a.a.createElement(ee.a,{colSpan:2},a.a.createElement(se.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},a.a.createElement(ie.a,{variant:"outlined",onClick:function(){return window.location.reload()}},"Reset"),e.state.busy?a.a.createElement(te.a,null):a.a.createElement(ie.a,{variant:"outlined",disabled:!e.hasChanges(n)&&!n.isValid,onClick:function(e){return n.handleSubmit(e)}},"Save & Next")))))))})))}}]),n}(a.a.Component))||K)||K,le=function(){return a.a.useContext(f.a).store.user},de=function(){return a.a.useContext(f.a).store.phonebook},pe=n(141),be=function(){function e(t){Object(l.a)(this,e),this.line_id=void 0,this.label=void 0,this.mobile=void 0;var n=t.line_id,r=t.label,a=t.mobile;this.line_id=n,this.label=r,this.mobile=a}return Object(d.a)(e,[{key:"validate",value:function(){var e=[];return this.label.length<1&&e.push("Label must have at least 1 character"),this.mobile.length<10&&e.push("Mobile must contain 10 characters"),e}}],[{key:"createFromArray",value:function(t){return t.map((function(t){return new e(t)}))}}]),e}(),fe=function(e){var t=Object(r.useState)(e.corrlinks_id||""),n=Object(x.a)(t,2),s=n[0],i=n[1],o=Object(r.useState)(""),l=Object(x.a)(o,2),d=l[0],p=l[1],b=le(),f=de();return Object(r.useEffect)((function(){s&&s!==d&&(f.fetchPhonebookEntries(s),p(s))})),Object(r.useEffect)((function(){b.fetchUsers()}),[b]),Object(pe.a)((function(){var e,t=b.users.slice().sort((function(e,t){return e.name>t.name?1:-1})),n=t.reduce((function(e,t){return Object.assign(e,Object(E.a)({},t.corrlinks_id,t))}),{});return a.a.createElement(a.a.Fragment,null,b.isLoading&&a.a.createElement(te.a,null),a.a.createElement(oe.a,{id:"corrlinks_id",onChange:function(e,t){return i(t?t.corrlinks_id:"")},options:t,getOptionLabel:function(e){return"".concat(e.name," ").concat(e.corrlinks_id)},style:{width:500},renderInput:function(e){return a.a.createElement(ne.a,Object.assign({},e,{name:"corrlinks_id",variant:"standard",fullWidth:!0}))},renderOption:function(e){return a.a.createElement("div",{"data-value":e.corrlinks_id},"".concat(e.name," ").concat(e.corrlinks_id))}}),s&&a.a.createElement(O.a,{isLoading:f.isLoading,title:"Phonebook: ".concat((null===(e=n[""+s])||void 0===e?void 0:e.name)||"UNKNOWN"),data:f.entries,options:{pageSize:15,sorting:!0},columns:[{title:"line",field:"line_id",defaultSort:"asc",editable:"never"},{title:"label",field:"label",defaultSort:"asc",editable:"always"},{title:"mobile",field:"mobile",editable:"always"}],editable:{isEditable:function(e){return!0},onRowUpdate:function(e,t){return new Promise(function(){var t=Object(u.a)(c.a.mark((function t(n,r){var a,i,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=s,t.prev=1,i=new be(e),!(o=i.validate()).length){t.next=7;break}return alert(o.join("\n")),t.abrupt("return",r());case 7:return t.next=9,f.updatePhonebookEntry({corrlinks_id:a,entry:i});case 9:t.sent?n(null):r(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),r();case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e,n){return t.apply(this,arguments)}}())},onRowDelete:function(e){return new Promise(function(){var t=Object(u.a)(c.a.mark((function t(n,r){var a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s,(i=new be(e)).label="",i.mobile="",t.prev=4,t.next=7,f.updatePhonebookEntry({corrlinks_id:a,entry:i});case 7:t.sent?n(null):r(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),r();case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,n){return t.apply(this,arguments)}}())}}}))}))},he=n(29),me=n(272),ve=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"logout",value:function(e){alert("logout! ".concat(e))}},{key:"login",value:function(){alert("login!")}}]),e}(),ge=["https://theeblvd.ngrok.io","http://localhost:3000","http://localhost:4000/dev","http://1858-5-101-143-119.ngrok.io"],ke=new(function(){function e(){var t=this;Object(l.a)(this,e),this.auth=new ve,this.api=Object(me.create)({baseURL:ge[0],headers:{Accept:"application/json"}}),this.fetchUserPayments=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinksId,e.next=3,t.api.get("users/".concat(a,"/payments"),r);case 3:if(!(s=e.sent).data||!s.data.data){e.next=7;break}return i=s.data.data,e.abrupt("return",Object(he.a)(i));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.fetchUsers=function(){var e=Object(u.a)(c.a.mark((function e(n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.get("users",n);case 2:if(!(r=e.sent).data||!r.data.data){e.next=6;break}return a=r.data.data,e.abrupt("return",Object(he.a)(a));case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateUser=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinks_id,s=n.user,e.next=3,t.api.put("/users/".concat(a),s,r);case 3:if((i=e.sent).ok){e.next=7;break}throw console.log({result:i}),new Error(i.originalError.message);case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.addUser=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.post("/users",n,r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.deleteUser=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinks_id,e.next=3,t.api.delete("/users/".concat(a),r);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.addUserPayment=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinks_id,s=n.payment,e.next=3,t.api.post("/users/".concat(a,"/payments"),s,r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.sendMessageToUser=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinks_id,s=n.subject,i=n.body,e.next=3,t.api.post("/admin/".concat(a,"/message"),{subject:s,body:i},r);case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.deleteUserPayment=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinks_id,s=n.payment_id,e.next=3,t.api.delete("/users/".concat(a,"/payments/").concat(s),r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.postPurchase=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.amount,s=n.comment,e.next=3,t.api.post("/user/".concat(n.corrlinks_id,"/purchase/").concat(n.product_instance_id),{amount:a,comment:s},r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.fetchPhonebookEntries=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinks_id,e.next=3,t.api.get("phonebook/".concat(a),r);case 3:if(!(s=e.sent).data||!s.data.data){e.next=7;break}return i=s.data.data,e.abrupt("return",Object(he.a)(i));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getPhonebookEmail=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinks_id,e.next=3,t.api.get("phonebook-email/".concat(a,"?subject=phonebook"),r);case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.updatePhonebookEntries=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinks_id,s=n.entries,e.next=3,t.api.put("phonebook/".concat(a),s,r);case 3:if(!(i=e.sent).data||!i.data.data){e.next=7;break}return o=i.data.data,e.abrupt("return",Object(he.a)(o));case 7:if(!i.data.error){e.next=9;break}throw i.data.error;case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.sendTextPhonebook=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s,i,o,u,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinks_id,s=n.text,i=n.account,o=n.responseRequired,u=void 0===o?null:o,e.next=3,t.api.put("phonebook/".concat(a,"/process"),{text:s,responseRequired:u,account:i},r);case 3:if(!(l=e.sent).data||!l.data.data){e.next=7;break}return d=l.data.data,e.abrupt("return",Object(he.a)(d));case 7:if(!l.data.text){e.next=9;break}return e.abrupt("return",l.data.text);case 9:if(!l.data.error){e.next=11;break}throw l.data.error;case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.sendToMessageFromCorrlinks=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s,i,o,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinks_id,s=n.text,i=n.account,o=n.subject,u=void 0===o?"phonebook":o,e.next=3,t.api.post("message-from-corrlinks",{to:"na",from:"blank (".concat(a,")"),body:s,subject:u,account:i},r);case 3:return l=e.sent,console.log(l),alert(l.data.data.message||l.data.data.status),e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.fetchUserNotes=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinks_id,e.next=3,t.api.get("users/".concat(a,"/notes"),r);case 3:if(!(s=e.sent).data||!s.data.data){e.next=7;break}return i=s.data.data,e.abrupt("return",Object(he.a)(i));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.fetchMessagesForCorrlinks=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinks_id,e.next=3,t.api.get("users/".concat(a,"/messages-for-corrlinks"),r);case 3:if(!(s=e.sent).data||!s.data.data){e.next=7;break}return i=s.data.data,e.abrupt("return",Object(he.a)(i));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.fetchMessagesForSociety=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinks_id,e.next=3,t.api.get("users/".concat(a,"/messages-for-society"),r);case 3:if(!(s=e.sent).data||!s.data.data){e.next=7;break}return i=s.data.data,e.abrupt("return",Object(he.a)(i));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.fetchProducts=function(){var e=Object(u.a)(c.a.mark((function e(n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.get("products",n);case 2:if(!(r=e.sent).data||!r.data.data){e.next=6;break}return a=r.data.data,e.abrupt("return",Object(he.a)(a));case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addUserNote=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinks_id,s=n.note,e.next=3,t.api.post("users/".concat(a,"/notes"),{note:s},r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.deleteUserNote=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.corrlinks_id,s=n.note_id,e.next=3,t.api.delete("/users/".concat(a,"/notes/").concat(s),r);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();this.api.addMonitor((function(e){403!==e.status&&401!==e.status||t.auth.logout("due to status code ".concat(e.status))})),window.location.href.includes("localhost")&&this.setEndpoint(ge[1])}return Object(d.a)(e,[{key:"setEndpoint",value:function(e){this.api=Object(me.create)({baseURL:e,headers:{Accept:"application/json"}}),console.log("Endpoint set to ".concat(e))}},{key:"getEndpoints",value:function(){return ge}},{key:"getEndpoint",get:function(){return this.api.getBaseURL()}}]),e}()),_e=n(209),ye=function(e){return function(t){e(t.target.value)}},Oe=function(e){var t=le(),n=Object(r.useState)(""),s=Object(x.a)(n,2),i=s[0],o=s[1],l=Object(r.useState)(""),d=Object(x.a)(l,2),p=d[0],b=d[1],f=Object(r.useState)(""),h=Object(x.a)(f,2),m=h[0],v=h[1],g=Object(r.useState)(""),k=Object(x.a)(g,2),_=k[0],y=k[1],O=Object(r.useState)("null"),j=Object(x.a)(O,2),w=j[0],E=j[1],C=de();Object(r.useEffect)((function(){t.fetchUsers()}),[t]);var S=function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.sendTextPhonebook({corrlinks_id:_,text:i,account:m,responseRequired:"EMAIL_TEXT"});case 2:n=e.sent,console.log(n),E(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.sendToMessageFromCorrlinks({corrlinks_id:_,text:i,subject:t,account:m});case 2:n=e.sent,console.log(n),E(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){return E("")},P=function(){return o(je)},F=function(){return o(w)},M=function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getPhonebookEmail({corrlinks_id:_});case 2:n=e.sent,console.log(n),E(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(pe.a)((function(){var e=t.users.slice().sort((function(e,t){return e.name>t.name?1:-1}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(oe.a,{id:"corrlinks_id",onChange:function(e,t){return y(t?t.corrlinks_id:"")},options:e,getOptionLabel:function(e){return"".concat(e.name," ").concat(e.corrlinks_id)},style:{width:300},renderInput:function(e){return a.a.createElement(ne.a,Object.assign({},e,{name:"corrlinks_id",variant:"standard",fullWidth:!0}))},renderOption:function(e){return a.a.createElement("div",{"data-value":e.corrlinks_id},"".concat(e.name," ").concat(e.corrlinks_id))}}),a.a.createElement(ie.a,{variant:"outlined",onClick:P},"Add template text"),a.a.createElement(ie.a,{variant:"outlined",disabled:!_,onClick:M},"Get Phonebook email"),a.a.createElement(_e.a,{style:{border:"1px solid black"},placeholder:"Subject",value:p,onChange:ye(b),rows:20,fullWidth:!0}),a.a.createElement(_e.a,{style:{border:"1px solid black"},placeholder:"account",value:m,onChange:ye(v),rows:20,fullWidth:!0}),a.a.createElement(_e.a,{style:{border:"1px solid black"},placeholder:"email",value:i,onChange:ye(o),rows:20,fullWidth:!0,multiline:!0}),a.a.createElement(ie.a,{variant:"outlined",disabled:!_,onClick:S},"Send Phonebook email to process"),a.a.createElement(ie.a,{variant:"outlined",disabled:!_,onClick:L},"Clear Response"),a.a.createElement(ie.a,{variant:"outlined",disabled:!_,onClick:F},"Copy Response to Text"),a.a.createElement(ie.a,{variant:"outlined",disabled:!_,onClick:function(){return U(p)}},"Send to message-from-corrlinks"),a.a.createElement("div",{style:{whiteSpace:"pre"}},w))}))},je="This is your Phonebook!\n\nYou can add up to 15 entries. Add a friends and family on each line, like so:\n\n1. 01234567890 Joe mobile\n\nWhen you send back the phonebook, we\u2019ll update our records automatically, and message you back if there are any\nproblems.\n\n--phonebook start\n1.\n2. 4242424242 shaun\n3. 1234567890 shaun again\n4. 0909090909 julia\n5.\n6.\n7.\n8.\n9.\n10.\n11.\n12.\n13.\n14.\n15.\n--phonebook end\n\nPHONEBOOK INSTRUCTIONS\nTo send an email to a contact in your phonebook, send us the email with their name only in the first line, and your\nmessage on the next lines. For example:\n\nJoe mobile\nHi Joe, this is a test message\nThanks!\nJack\n\nTo ADD a contact: enter their mobile number and name into an empty row.\nTo DELETE a contact: remove their mobile number and name",we=function(e){return function(t){e(t.target.value)}},xe=function(e){var t=le(),n=Object(r.useState)(""),s=Object(x.a)(n,2),i=s[0],o=s[1],l=Object(r.useState)(""),d=Object(x.a)(l,2),p=d[0],b=d[1],f=Object(r.useState)(""),h=Object(x.a)(f,2),m=h[0],v=h[1],g=Object(r.useState)(""),k=Object(x.a)(g,2),_=k[0],y=k[1],O=function(e,t){return[y((null===t||void 0===t?void 0:t.corrlinks_id)||""),v((null===t||void 0===t?void 0:t.corrlinks_account)||"")]},j=function(){return[o(""),b(""),v(""),y("")]},w=function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.sendMessageToUser({corrlinksId:_,subject:p,body:i});case 2:if(!e.sent){e.next=6;break}return alert("message sent"),e.abrupt("return",j());case 6:alert("message failed to send");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=!_||!p||!i;return Object(r.useEffect)((function(){t.fetchUsers()}),[t]),Object(pe.a)((function(){var e=t.users.slice().sort((function(e,t){return e.name>t.name?1:-1}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(oe.a,{id:"corrlinksId",onChange:O,options:e,getOptionLabel:function(e){return"".concat(e.name," ").concat(e.corrlinks_id)},style:{width:300},renderInput:function(e){return a.a.createElement(ne.a,Object.assign({},e,{name:"corrlinksId",variant:"standard",fullWidth:!0}))},renderOption:function(e){return a.a.createElement("div",{"data-value":e.corrlinks_id},"".concat(e.name," ").concat(e.corrlinks_id))}}),a.a.createElement(_e.a,{style:{border:"1px solid black"},placeholder:"Subject",value:p,onChange:we(b),fullWidth:!0}),a.a.createElement(_e.a,{style:{border:"1px solid black"},placeholder:"from ",value:m,disabled:!0,fullWidth:!0}),a.a.createElement(_e.a,{style:{border:"1px solid black"},placeholder:"email",value:i,onChange:we(o),rows:20,fullWidth:!0,multiline:!0}),a.a.createElement(ie.a,{variant:"outlined",disabled:E,onClick:w},"Send Message"),a.a.createElement(ie.a,{variant:"outlined",disabled:E,onClick:j},"Clear"))}))};function Ee(e){var t=e.children,n=e.value,r=e.index,s=Object(h.a)(e,["children","value","index"]);return a.a.createElement(k.a,Object.assign({component:"div",role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},s),n===r&&a.a.createElement(_.a,{p:3},t))}function Ce(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var Se,Ue=Object(f.c)("store")(G=Object(f.d)(G=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleChange=function(){return console.log},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.store.location.hash;return a.a.createElement("div",null,a.a.createElement(m.a,{position:"static"},a.a.createElement(v.a,{value:e,"aria-label":"simple tabs example"},a.a.createElement(g.a,Object.assign({label:"Corrlinks Users",value:"corrlinks-users",href:"#corrlinks-users"},Ce(1))),a.a.createElement(g.a,Object.assign({label:"Payment Entry Form",value:"payment-form",href:"#payment-form"},Ce(2))),a.a.createElement(g.a,Object.assign({label:"Phonebooks",value:"phonebooks",href:"#phonebooks"},Ce(3))),a.a.createElement(g.a,Object.assign({label:"PhonebookTest",value:"phonebook-test",href:"#phonebook-test"},Ce(3))),a.a.createElement(g.a,Object.assign({label:"Message To Corrlnks",value:"send-message-to-corrlinks",href:"#send-message-to-corrlinks"},Ce(3))))),window.location.host.includes("localhost")&&a.a.createElement(re.a,{value:ke.getEndpoint,onChange:function(e){var t=e.target.value;ke.setEndpoint(t)}},ke.getEndpoints().map((function(e){return a.a.createElement(ae.a,{key:e,value:e},e)}))),a.a.createElement(Ee,{value:e,index:"corrlinks-users"},a.a.createElement(X,null)),a.a.createElement(Ee,{value:e,index:"payment-form"},a.a.createElement(ue,null)),a.a.createElement(Ee,{value:e,index:"phonebooks"},a.a.createElement(fe,null)),a.a.createElement(Ee,{value:e,index:"phonebook-test"},a.a.createElement(Oe,null)),a.a.createElement(Ee,{value:e,index:"send-message-to-corrlinks"},a.a.createElement(xe,null)))}}]),n}(a.a.Component))||G)||G,Le=Object(f.c)("store")(Se=Object(f.d)(Se=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.store.app.fetchUsers();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement(Ue,null)}}]),n}(a.a.Component))||Se)||Se;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Pe=n(580),Fe=n(203),Me=Object(Fe.a)({typography:{fontFamily:"'Lato', sans-serif",subtitle1:{fontFamily:"Montserrat, sans-serif",textTransform:"uppercase"},subtitle2:{fontFamily:"Montserrat, sans-serif",textTransform:"uppercase",color:"#0e4b87"},h1:{fontFamily:"Montserrat, sans-serif",fontSize:"4rem"},h2:{fontFamily:"Montserrat, sans-serif"},h3:{fontFamily:"Montserrat, sans-serif"},h4:{fontFamily:"Montserrat, sans-serif"},h5:{fontFamily:"Montserrat, sans-serif"},h6:{fontFamily:"Montserrat, sans-serif",fontWeight:500,letterSpacing:"0.3rem"}},palette:{primary:{light:"#fff",main:"#0e4b87",contrastText:"#fff"},secondary:{light:"#137dc9",main:"#1B365D",dark:"#135dbd",contrastText:"#fff"}}});Me.overrides={MuiTableCell:{root:{padding:Me.spacing(.3,1,.3,1),"&:first-child":{paddingLeft:16}}}};var Te,De=Me,Ie=(Object.assign({},Me.typography.subtitle2,Me.typography.h4),Me.palette.primary.main,Me.spacing(1),Me.palette.secondary.light,n(28)),ze=n(202),Ne=n(584),Ae=n(568),Re=n(582),We=n(384),Be=n.n(We),Ve=n(162),Qe=n(380),qe=n.n(Qe),He=n(382),Je=n.n(He),Ke=n(383),Ge=n.n(Ke),Xe=n(381),Ye=n.n(Xe);function $e(e){return a.a.createElement(Re.a,Object.assign({},e,{direction:"up"}))}var Ze,et,tt,nt,rt,at,st,it,ot,ct,ut,lt,dt,pt,bt,ft,ht,mt,vt,gt,kt,_t,yt,Ot,jt,wt,xt,Et,Ct,St,Ut,Lt,Pt,Ft,Mt,Tt,Dt,It,zt,Nt,At,Rt,Wt,Bt,Vt,Qt,qt,Ht,Jt,Kt,Gt,Xt,Yt,$t,Zt,en,tn,nn,rn,an,sn,on,cn,un,ln,dn,pn,bn,fn,hn,mn,vn,gn,kn,_n,yn,On,jn,wn,xn,En,Cn,Sn={success:{backgroundColor:"#1B365D"},info:{backgroundColor:"lightblue"},warning:{backgroundColor:"orange"},error:{backgroundColor:"red"}},Un={success:qe.a,warning:Ye.a,error:Je.a,info:Ge.a},Ln=Object(f.c)("store")(Te=Object(f.d)(Te=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleClick=function(){e.props.store.notifications.popFromMessageQueue()},e.handleClose=function(){e.props.store.notifications.popFromMessageQueue()},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.store.notifications.getFromMessageQueue();if(!e)return"";var t=Un[e.type],n=e.message,r=e.type,s="success"===r?"":r.charAt(0).toUpperCase()+r.substr(1)+": ";return a.a.createElement(Ne.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!0,onClose:this.handleClose,TransitionComponent:$e,ContentProps:{"aria-describedby":"message-id"}},a.a.createElement(Ae.a,{style:Sn[r],message:a.a.createElement("span",{id:"client-snackbar",style:{color:"white",display:"flex",alignItems:"center"}},a.a.createElement(t,{style:{opacity:.9,marginRight:8}}),s,n),action:[a.a.createElement(Ve.a,{key:"close","aria-label":"close",color:"inherit",onClick:this.handleClose},a.a.createElement(Be.a,{style:{fontSize:20}}))]}))}}]),n}(a.a.Component))||Te)||Te,Pn=n(14),Fn=n(15),Mn=(n(156),Ze=w.d.bound,et=w.d.bound,tt=w.d.bound,nt=w.d.bound,rt=w.d.bound,at=w.d.bound,st=w.d.bound,it=w.d.bound,ot=w.d.bound,ct=w.d.bound,ut=w.d.bound,lt=w.d.bound,dt=w.d.bound,pt=w.d.bound,bt=w.d.bound,ft=function e(){Object(l.a)(this,e),Object(Pn.a)(this,"isLoadingUsers",ht,this),Object(Pn.a)(this,"users",mt,this),Object(Pn.a)(this,"isPaymentsLoading",vt,this),Object(Pn.a)(this,"payments",gt,this),Object(Pn.a)(this,"paymentNotification",kt,this),Object(Pn.a)(this,"notes",_t,this),Object(Pn.a)(this,"products",yt,this),Object(Pn.a)(this,"messagesForCorrlinks",Ot,this),Object(Pn.a)(this,"messagesForSociety",jt,this),Object(Pn.a)(this,"isLoading",wt,this),Object(Pn.a)(this,"fetchUserPayments",xt,this),Object(Pn.a)(this,"setLoading",Et,this),Object(Pn.a)(this,"fetchUsers",Ct,this),Object(Pn.a)(this,"updateUser",St,this),Object(Pn.a)(this,"addUser",Ut,this),Object(Pn.a)(this,"deleteUser",Lt,this),Object(Pn.a)(this,"submitPayment",Pt,this),Object(Pn.a)(this,"submitPurchase",Ft,this),Object(Pn.a)(this,"deletePayment",Mt,this),Object(Pn.a)(this,"fetchUserNotes",Tt,this),Object(Pn.a)(this,"fetchMessagesForCorrlinks",Dt,this),Object(Pn.a)(this,"fetchMessagesForSociety",It,this),Object(Pn.a)(this,"fetchProducts",zt,this),Object(Pn.a)(this,"addUserNote",Nt,this),Object(Pn.a)(this,"deleteUserNote",At,this)},ht=Object(Fn.a)(ft.prototype,"isLoadingUsers",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mt=Object(Fn.a)(ft.prototype,"users",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),vt=Object(Fn.a)(ft.prototype,"isPaymentsLoading",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gt=Object(Fn.a)(ft.prototype,"payments",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),kt=Object(Fn.a)(ft.prototype,"paymentNotification",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_t=Object(Fn.a)(ft.prototype,"notes",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yt=Object(Fn.a)(ft.prototype,"products",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ot=Object(Fn.a)(ft.prototype,"messagesForCorrlinks",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),jt=Object(Fn.a)(ft.prototype,"messagesForSociety",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),wt=Object(Fn.a)(ft.prototype,"isLoading",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{users:!1,payments:!1,notes:!1,products:!1,messagesForCorrlinks:!1,messagesForSociety:!1}}}),xt=Object(Fn.a)(ft.prototype,"fetchUserPayments",[Ze],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="fetchUserPayments",t.prev=1,e.isPaymentsLoading=!0,t.next=5,ke.fetchUserPayments({corrlinksId:n}).catch((function(e){console.log(r,"there are some API errors",e)}));case 5:(a=t.sent)&&(e.payments=[].concat(Object(he.a)(L(e.payments,"corrlinks_id",n)),Object(he.a)(a))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(r,t.t0);case 12:return e.isPaymentsLoading=!1,t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}}),Et=Object(Fn.a)(ft.prototype,"setLoading",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n,r){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isLoading=Object.assign({},e.isLoading,Object(E.a)({},n,r));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Ct=Object(Fn.a)(ft.prototype,"fetchUsers",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(u.a)(c.a.mark((function t(){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="fetchUsers",t.prev=1,e.setLoading("users",!0),t.next=5,ke.fetchUsers().catch((function(e){console.log("there are some API errors",e)}));case 5:r=t.sent,e.setLoading("users",!1),r&&(e.users=Object(he.a)(r)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(n,t.t0);case 13:return e.setLoading("users",!1),t.abrupt("return",null);case 15:case"end":return t.stop()}}),t,null,[[1,10]])})))}}),St=Object(Fn.a)(ft.prototype,"updateUser",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.corrlinks_id,a=n.user,s="updateUser",t.prev=2,e.isLoadingUsers=!0,t.next=6,ke.updateUser({corrlinks_id:r,user:a});case 6:e.users=[].concat(Object(he.a)(e.users.filter((function(e){return e.corrlinks_id!==a.corrlinks_id}))),[a]),e.isLoadingUsers=!1,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(s,t.t0),e.isLoadingUsers=!1;case 14:return t.abrupt("return",[]);case 15:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}}),Ut=Object(Fn.a)(ft.prototype,"addUser",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.user,a="addUser",t.prev=2,e.isLoadingUsers=!0,t.next=6,ke.addUser(r);case 6:(s=t.sent).data.data&&(e.users=[].concat(Object(he.a)(e.users),[s.data.data])),e.isLoadingUsers=!1,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(a,t.t0),e.isLoadingUsers=!1;case 15:return t.abrupt("return",[]);case 16:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()}}),Lt=Object(Fn.a)(ft.prototype,"deleteUser",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.corrlinks_id,a="deleteUser",t.prev=2,e.isLoadingUsers=!0,t.next=6,ke.deleteUser({corrlinks_id:r});case 6:e.users=e.users.filter((function(e){return e.corrlinks_id!==r})),e.isLoadingUsers=!1,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(a,t.t0),e.isLoadingUsers=!1;case 14:return t.abrupt("return",[]);case 15:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}}),Pt=Object(Fn.a)(ft.prototype,"submitPayment",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="submitPayment",t.prev=1,a={corrlinks_id:n.corrlinks_id},delete(s=Object.assign({},n)).corrlinks_id,s.date_created=P(s.date_created),s.date_subscription_ends=s.date_subscription_ends?P(s.date_subscription_ends):null,e.isLoadingUsers=!0,t.next=10,ke.addUserPayment({corrlinks_id:a.corrlinks_id,payment:s});case 10:e.isLoadingUsers=!1,t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(1),console.log(r,t.t0),e.isLoadingUsers=!1,t.abrupt("return",!1);case 18:return e.paymentNotification={message:"done",type:"success"},t.abrupt("return",!0);case 20:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()}}),Ft=Object(Fn.a)(ft.prototype,"submitPurchase",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="submitPurchase",t.prev=1,e.isLoadingUsers=!0,t.next=5,ke.postPurchase(n);case 5:e.isLoadingUsers=!1,t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(1),console.log(r,t.t0),e.isLoadingUsers=!1,t.abrupt("return",!1);case 13:return e.paymentNotification={message:"done",type:"success"},t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),Mt=Object(Fn.a)(ft.prototype,"deletePayment",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.corrlinks_id,a=n.payment_id,s="deletePayment",i="payments",t.prev=3,e.setLoading(i,!0),t.next=7,ke.deleteUserPayment({corrlinks_id:r,payment_id:a});case 7:200===t.sent.status&&(e.payments=e.payments.filter((function(e){return!(e.corrlinks_id===r&&e.id===a)}))),e.setLoading(i,!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),console.log(s,t.t0),e.setLoading(i,!1);case 16:return t.abrupt("return",[]);case 17:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()}}),Tt=Object(Fn.a)(ft.prototype,"fetchUserNotes",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.corrlinks_id,a="fetchUserNotes",s="notes",t.prev=3,e.setLoading(s,!0),t.next=7,ke.fetchUserNotes({corrlinks_id:r}).catch((function(e){console.log("there are some API errors",e)}));case 7:i=t.sent,e.setLoading(s,!1),i&&(e.notes=Object(he.a)(i)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),console.log(a,t.t0);case 15:return e.setLoading(s,!1),t.abrupt("return",null);case 17:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()}}),Dt=Object(Fn.a)(ft.prototype,"fetchMessagesForCorrlinks",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.corrlinks_id,a="fetchMessagesForCorrlinks",s="messagesForCorrlinks",t.prev=3,e.setLoading(s,!0),t.next=7,ke.fetchMessagesForCorrlinks({corrlinks_id:r}).catch((function(e){console.log("there are some API errors",e)}));case 7:i=t.sent,e.setLoading(s,!1),i&&(e.messagesForCorrlinks=Object(he.a)(i)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),console.log(a,t.t0);case 15:return e.setLoading(s,!1),t.abrupt("return",null);case 17:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()}}),It=Object(Fn.a)(ft.prototype,"fetchMessagesForSociety",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.corrlinks_id,a="fetchMessagesForSociety",s="messagesForSociety",t.prev=3,e.setLoading(s,!0),t.next=7,ke.fetchMessagesForSociety({corrlinks_id:r}).catch((function(e){console.log("there are some API errors",e)}));case 7:i=t.sent,e.setLoading(s,!1),i&&(e.messagesForSociety=Object(he.a)(i)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),console.log(a,t.t0);case 15:return e.setLoading(s,!1),t.abrupt("return",null);case 17:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()}}),zt=Object(Fn.a)(ft.prototype,"fetchProducts",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(u.a)(c.a.mark((function t(){var n,r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="fetchProducts",r="products",t.prev=2,e.setLoading(r,!0),t.next=6,ke.fetchProducts().catch((function(e){console.log("there are some API errors",e)}));case 6:a=t.sent,e.setLoading(r,!1),a&&(e.products=Object(he.a)(a)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(n,t.t0);case 14:return e.setLoading(r,!1),t.abrupt("return",null);case 16:case"end":return t.stop()}}),t,null,[[2,11]])})))}}),Nt=Object(Fn.a)(ft.prototype,"addUserNote",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s,i,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.corrlinks_id,a=n.note,s="addUserNote",i="notes",t.prev=3,e.setLoading(i,!0),t.next=7,ke.addUserNote({corrlinks_id:r,note:a});case 7:(o=t.sent).data.data&&(e.notes=[].concat(Object(he.a)(e.notes),[o.data.data])),e.setLoading(i,!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),console.log(s,t.t0),e.setLoading(i,!1);case 16:return t.abrupt("return",[]);case 17:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()}}),At=Object(Fn.a)(ft.prototype,"deleteUserNote",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.corrlinks_id,a=n.note_id,s="deleteUserNote",i="notes",t.prev=3,e.setLoading(i,!0),t.next=7,ke.deleteUserNote({corrlinks_id:r,note_id:a});case 7:e.notes=e.notes.filter((function(e){return!(e.corrlinks_id===r&&e.id===a)})),e.setLoading(i,!1),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(s,t.t0),e.setLoading(i,!1);case 15:return t.abrupt("return",[]);case 16:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}()}}),ft),Tn=(Rt=w.d.bound,Wt=function e(){Object(l.a)(this,e),Object(Pn.a)(this,"hash",Bt,this),Object(Pn.a)(this,"q",Vt,this),Object(Pn.a)(this,"locationHashChanged",Qt,this),window.addEventListener("hashchange",this.locationHashChanged,!1),this.locationHashChanged({newURL:window.location.href})},Bt=Object(Fn.a)(Wt.prototype,"hash",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Vt=Object(Fn.a)(Wt.prototype,"q",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Qt=Object(Fn.a)(Wt.prototype,"locationHashChanged",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=(t.newURL.split("#")[1]||"").split("?"),r=Object(x.a)(n,2),a=r[0],s=r[1];e.hash=a,e.q=s}}}),Wt),Dn=(qt=w.d.bound,Ht=w.d.bound,Jt=function e(){var t=this;Object(l.a)(this,e),Object(Pn.a)(this,"messageQueue",Kt,this),Object(Pn.a)(this,"addToMessageQueue",Gt,this),Object(Pn.a)(this,"popFromMessageQueue",Xt,this),this.getFromMessageQueue=function(){return t.messageQueue.length?t.messageQueue[0]:null}},Kt=Object(Fn.a)(Jt.prototype,"messageQueue",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Gt=Object(Fn.a)(Jt.prototype,"addToMessageQueue",[qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.messageQueue.push(t)}}}),Xt=Object(Fn.a)(Jt.prototype,"popFromMessageQueue",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.messageQueue.pop()}}}),Jt),In=function(){function e(t){Object(l.a)(this,e),this.corrlinks_id=void 0,this.name=void 0,this.status=void 0,this.location=void 0,this.phonebook_entries_allowed=void 0,this.date_created=void 0,this.date_released=void 0,this.date_subscription_ends=void 0,this.adhoc_phonebook_edit_window_date_end=void 0,this.adhoc_phonebook_edit_window_date_start=void 0,this.date_news_subscription_ends=void 0,this.date_horoscope_subscription_ends=void 0,this.date_sports_subscription_ends=void 0,this.date_investments_subscription_ends=void 0,this.credits=void 0,Object.assign(this,t)}return Object(d.a)(e,null,[{key:"createFromArray",value:function(t){return t.map((function(t){return new e(t)}))}}]),e}(),zn=(Yt=w.d.bound,$t=w.d.bound,Zt=w.d.bound,en=w.d.bound,tn=w.d.bound,nn=w.d.bound,rn=function e(){Object(l.a)(this,e),Object(Pn.a)(this,"users",an,this),Object(Pn.a)(this,"isLoading",sn,this),Object(Pn.a)(this,"setLoading",on,this),Object(Pn.a)(this,"fetchUsers",cn,this),Object(Pn.a)(this,"updateUser",un,this),Object(Pn.a)(this,"addUser",ln,this),Object(Pn.a)(this,"deleteUser",dn,this),Object(Pn.a)(this,"sendMessageToUser",pn,this),this.fetchUsers()},an=Object(Fn.a)(rn.prototype,"users",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),sn=Object(Fn.a)(rn.prototype,"isLoading",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),on=Object(Fn.a)(rn.prototype,"setLoading",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isLoading=n;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),cn=Object(Fn.a)(rn.prototype,"fetchUsers",[$t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(u.a)(c.a.mark((function t(){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="fetchUsers",t.prev=1,e.setLoading(!0),t.next=5,ke.fetchUsers().catch((function(e){console.log("there are some API errors",e)}));case 5:r=t.sent,e.setLoading(!1),r&&(e.users=Object(he.a)(In.createFromArray(r))),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(n,t.t0);case 13:return e.setLoading(!1),t.abrupt("return",null);case 15:case"end":return t.stop()}}),t,null,[[1,10]])})))}}),un=Object(Fn.a)(rn.prototype,"updateUser",[Zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.corrlinks_id,a=n.user,s="updateUser",t.prev=2,e.setLoading(!0),t.next=6,ke.updateUser({corrlinks_id:r,user:a});case 6:e.users=[].concat(Object(he.a)(e.users.filter((function(e){return e.corrlinks_id!==a.corrlinks_id}))),[a]),e.setLoading(!1),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(s,t.t0),e.setLoading(!1);case 14:return t.abrupt("return",[]);case 15:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}}),ln=Object(Fn.a)(rn.prototype,"addUser",[en],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.user,a="addUser",t.prev=2,e.setLoading(!0),t.next=6,ke.addUser(r);case 6:(s=t.sent).data.data&&(e.users=[].concat(Object(he.a)(e.users),[s.data.data])),e.setLoading(!1),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(a,t.t0),e.setLoading(!1);case 15:return t.abrupt("return",[]);case 16:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()}}),dn=Object(Fn.a)(rn.prototype,"deleteUser",[tn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.corrlinks_id,a="deleteUser",t.prev=2,e.setLoading(!0),t.next=6,ke.deleteUser({corrlinks_id:r});case 6:e.users=e.users.filter((function(e){return e.corrlinks_id!==r})),e.setLoading(!1),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(a,t.t0),e.setLoading(!1);case 14:return t.abrupt("return",[]);case 15:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}}),pn=Object(Fn.a)(rn.prototype,"sendMessageToUser",[nn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s,i,o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.corrlinksId,a=n.subject,s=n.body,i="sendMessageToUser",o=!1,t.prev=3,e.setLoading(!0),t.next=7,ke.sendMessageToUser({corrlinks_id:r,subject:a,body:s});case 7:200===(null===(u=t.sent)||void 0===u?void 0:u.status)&&(o=!0),e.setLoading(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),console.log(i,t.t0),e.setLoading(!1);case 16:return t.abrupt("return",o);case 17:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()}}),rn),Nn=n(385);function An(e){return e.map((function(e){e.tableData;var t=Object(h.a)(e,["tableData"]);return Object(Nn.a)({},t)}))}var Rn=(bn=w.d.bound,fn=w.d.bound,hn=w.d.bound,mn=w.d.bound,vn=w.d.bound,gn=w.d.bound,kn=function e(){Object(l.a)(this,e),Object(Pn.a)(this,"entries",_n,this),Object(Pn.a)(this,"isLoading",yn,this),Object(Pn.a)(this,"setLoading",On,this),Object(Pn.a)(this,"fetchPhonebookEntries",jn,this),Object(Pn.a)(this,"updatePhonebookEntry",wn,this),Object(Pn.a)(this,"sendTextPhonebook",xn,this),Object(Pn.a)(this,"sendToMessageFromCorrlinks",En,this),Object(Pn.a)(this,"getPhonebookEmail",Cn,this)},_n=Object(Fn.a)(kn.prototype,"entries",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yn=Object(Fn.a)(kn.prototype,"isLoading",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),On=Object(Fn.a)(kn.prototype,"setLoading",[bn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isLoading=n;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),jn=Object(Fn.a)(kn.prototype,"fetchPhonebookEntries",[fn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="fetchPhonebookEntries",n||(e.entries=[]),t.prev=2,e.setLoading(!0),t.next=6,ke.fetchPhonebookEntries({corrlinks_id:n}).catch((function(e){console.log("there are some API errors",e)}));case 6:a=t.sent,e.setLoading(!1),a&&(e.entries=Object(he.a)(be.createFromArray(a))),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(r,t.t0);case 14:return e.setLoading(!1),t.abrupt("return",null);case 16:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()}}),wn=Object(Fn.a)(kn.prototype,"updatePhonebookEntry",[hn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s,i,o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.corrlinks_id,a=n.entry,s="updatePhonebookEntry",i=!0,t.prev=3,e.setLoading(!0),o=An(Object(w.o)(e.entries).map((function(e){return e.line_id===a.line_id?a:e}))),t.next=8,ke.updatePhonebookEntries({corrlinks_id:r,entries:o});case 8:e.entries=Object(he.a)(o),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(3),i=!1,u=s+":"+t.t0.map((function(e){return"\n  line ".concat(e.line_id,":\n    ").concat(e.errors.join("\n    "))})),alert(u);case 16:return e.setLoading(!1),t.abrupt("return",i);case 18:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}()}}),xn=Object(Fn.a)(kn.prototype,"sendTextPhonebook",[mn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s,i,o,u,l,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.corrlinks_id,a=n.text,s=n.account,i=n.responseRequired,o=void 0===i?null:i,u="sendTextPhonebook",l="",t.prev=3,e.setLoading(!0),t.next=7,ke.sendTextPhonebook({corrlinks_id:r,text:a,responseRequired:o,account:s});case 7:return d=t.sent,e.setLoading(!1),t.abrupt("return",d);case 12:t.prev=12,t.t0=t.catch(3),console.log(t.t0),l=u+":"+t.t0.map((function(e){return"\n  line ".concat(e.line_id,":\n    ").concat(e.errors.join("\n    "))}));case 16:return e.setLoading(!1),t.abrupt("return",l);case 18:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()}}),En=Object(Fn.a)(kn.prototype,"sendToMessageFromCorrlinks",[vn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s,i,o,u,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.corrlinks_id,a=n.text,s=n.subject,i=n.account,o="sendToMessageFromCorrlinks",u="",t.prev=3,e.setLoading(!0),t.next=7,ke.sendToMessageFromCorrlinks({corrlinks_id:r,text:a,subject:s,account:i});case 7:return l=t.sent,e.setLoading(!1),t.abrupt("return",l);case 12:t.prev=12,t.t0=t.catch(3),console.log(t.t0),u=o+":"+t.t0.map((function(e){return"\n  line ".concat(e.line_id,":\n    ").concat(e.errors.join("\n    "))}));case 16:return e.setLoading(!1),t.abrupt("return",u);case 18:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()}}),Cn=Object(Fn.a)(kn.prototype,"getPhonebookEmail",[gn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,s,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.corrlinks_id,a="getPhonebookEmail",s="",t.prev=3,e.setLoading(!0),t.next=7,ke.getPhonebookEmail({corrlinks_id:r});case 7:return i=t.sent,t.abrupt("return",i);case 11:t.prev=11,t.t0=t.catch(3),s=a+":"+t.t0.map((function(e){return"\n  line ".concat(e.line_id,":\n    ").concat(e.errors.join("\n    "))}));case 14:return e.setLoading(!1),t.abrupt("return",s);case 16:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}()}}),kn),Wn={app:new Mn,location:new Tn,notifications:new Dn,user:new zn,phonebook:new Rn};i.a.render(a.a.createElement(f.b,{store:Wn},a.a.createElement(Pe.a,{theme:De},a.a.createElement(Ie.a,{utils:ze.default},a.a.createElement(Le,null),a.a.createElement(Ln,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[394,1,2]]]);
//# sourceMappingURL=main.0ecc3d15.chunk.js.map